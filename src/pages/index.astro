---
import BaseLayout from '../layouts/BaseLayout.astro';
import PostCard from '../components/PostCard.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('posts', ({ data }) => {
  return data.draft !== true;
});

const sortedPosts = allPosts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout title="Genesis Vault with Mina Eureka Ernst">
  <div class="mb-16 text-center">
    <h1 class="page-title">
      Genesis Vault
    </h1>
    <p class="subtitle">
      with Mina Eureka Ernst
    </p>
    <p class="text-lg" style="color: var(--color-gray-dark); margin-top: 0.75rem;">
      思考の種を保管する、静かなデジタル日記
    </p>
  </div>

  <div class="grid gap-8">
    {sortedPosts.map(post => (
      <PostCard post={post} />
    ))}
  </div>

  {sortedPosts.length === 0 && (
    <div class="text-center py-20">
      <p style="color: var(--color-gray-dark);">まだ記事がありません</p>
    </div>
  )}
</BaseLayout>
