---
import type { CollectionEntry } from 'astro:content';

interface Props {
  post: CollectionEntry<'posts'>;
}

const { post } = Astro.props;
const { title, date, mood, weather, tags, description } = post.data;

const formattedDate = new Date(date).toLocaleDateString('ja-JP', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
  weekday: 'short'
});
---

<article class="card-hover">
  <a href={`/posts/${post.slug}`} class="block">
    <div class="post-meta">
      <time datetime={date.toISOString()}>{formattedDate}</time>
      {mood && <span class="text-lg">{mood}</span>}
      {weather && <span class="text-lg">{weather}</span>}
    </div>

    <h2 class="post-title">
      {title}
    </h2>

    {description && (
      <p class="post-description">{description}</p>
    )}

    {tags.length > 0 && (
      <div class="tags">
        {tags.map(tag => (
          <span class="tag">
            {tag}
          </span>
        ))}
      </div>
    )}
  </a>
</article>
